# ATS - Automated Trading System

Автоматизированная торговая система на базе ИИ-агентов для анализа рыночных данных и принятия торговых решений.

## Описание проекта

Система состоит из двух основных сценариев:

### Сценарий A (Интрадей)
Агрессивный, но рациональный подход к интрадей-торговле:
- Пробой диапазона/ключевого уровня только в сторону тренда (фильтр EMA)
- Подтверждение объемом (RVOL ≥ порога)
- Управление рисками через ATR и стопы
- Частичный фикс прибыли и трейлинг-стоп

### Сценарий B (Среднесрочный)
Мульти-портфельный подход для диверсификации:
- Donchian-20/55 и MA-тайминг на D1
- Volatility-targeting для управления рисками
- Переход к этому сценарию при росте депозита

## Архитектура системы

Проект использует многоуровневую архитектуру хранения и обработки данных:

- **SQLite** - локальная реляционная база данных для оперативного хранения котировок и сделок
- **ChromaDB** - векторная база данных для семантического поиска и анализа паттернов
- **Memgraph** - графовая база данных для анализа причинно-следственных связей
- **LangGraph** - оркестрация состояний агентов
- **LangChain** - инструменты для работы с ИИ-моделями
- **MetaTrader5** - интеграция с торговым терминалом

## Структура репозитория

```
ats/
├─ src/                        # основной код приложения
│  ├─ main.py                  # точка входа и CLI интерфейс
│  ├─ config.py                # настройки окружения и подключения
│  ├─ database/                # модели и адаптеры хранилищ
│  └─ synchronizer/            # сервисы синхронизации данных из MT5
│     ├─ sync_service.py       # orchestration логики синхронизации
│     ├─ clients/              # клиенты для внешних сервисов
│     ├─ processors/           # обработка и нормализация данных
│     ├─ services/             # бизнес-логика синхронизации
│     └─ utils/                # вспомогательные функции
├─ atl/                        # заготовки для торговых агентов
│  ├─ __init__.py
│  └─ prompts/                 # промпты для ИИ-моделей
├─ configs/                    # конфигурационные шаблоны
│  └─ __init__.py
├─ storage/                    # подготовка локальных хранилищ
│  └─ __init__.py
├─ tests/                      # тесты (unit/integration/backtests)
│  ├─ unit/
│  ├─ integration/
│  └─ backtests/
├─ docker/                     # заглушки для docker-настроек
│  └─ __init__.py
├─ docs/                       # документация по проекту
│  └─ project_development_plan.md
├─ init_databases.py           # скрипт инициализации хранилищ
├─ pyproject.toml              # описание зависимостей Poetry
├─ requirements.txt            # зафиксированные зависимости
└─ LICENSE                     # условия использования
```

## Технологии

- **Python 3.12+** - основная платформа разработки
- **Pydantic** - валидация данных и настройки
- **LangChain & LangGraph** - фреймворк для ИИ-агентов
- **ChromaDB** - векторное хранение
- **Memgraph** - графовая база данных
- **MetaTrader5** - интеграция с торговым терминалом
- **Ollama** - локальные ИИ-модели (бесплатно через облако)

## Установка и запуск

Подробные инструкции по установке и запуску находятся в файле `docs/project_development_plan.md`.

## Лицензия

Этот проект является частной разработкой и предназначен только для личного использования.

## Контакты

Для вопросов и предложений обращайтесь к документации в папке `docs/`.
